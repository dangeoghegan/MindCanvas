--- START OF FILE index.css ---
:root, [data-theme="light"] {
  --background: 208 100% 97%; /* #F0F8FF */
  --foreground: 224 71.4% 4.1%; /* #0A131F */

  --card: 208 100% 97%; /* #F0F8FF */
  --card-foreground: 224 71.4% 4.1%; /* #0A131F */

  --popover: 208 100% 97%; /* #F0F8FF */
  --popover-foreground: 224 71.4% 4.1%; /* #0A131F */

  --primary: 204 68% 66%; /* #5DADE2 */
  --primary-foreground: 224 71.4% 4.1%; /* #0A131F */

  --secondary: 214.3 31.8% 91.4%; /* #E3E8F0 */
  --secondary-foreground: 222.2 47.4% 11.2%; /* #101C2C */

  --muted: 214.3 31.8% 91.4%; /* #E3E8F0 */
  --muted-foreground: 215.4 16.3% 46.9%; /* #6B7280 */

  --accent: 281 60% 60%; /* #A95AD9 */
  --accent-foreground: 210 40% 98%;

  --destructive: 0 84.2% 60.2%; /* #F44336 */
  --destructive-foreground: 210 40% 98%;
  
  --success: 142.1 76.2% 36.3%;
  --success-foreground: 210 40% 98%;

  --border: 214.3 31.8% 91.4%; /* #E3E8F0 */
  --input: 214.3 31.8% 91.4%; /* #E3E8F0 */
  --ring: 204 68% 66%; /* #5DADE2 */

  --radius: 0.75rem; /* 12px */

  /* Category Colors (Preserved) */
  --cat-work: 45 78% 70%; /* #E9C46A */
  --cat-home: 173 39% 60%; /* #6FC1B5 */
  --cat-therapy: 270 38% 75%; /* #BFA2DB */
  --cat-personal: 6 83% 76%; /* #F4978E */
  --cat-foreground: 222 84% 10%; /* Darker text for colored cards */
}

[data-theme="dark"] {
  --background: 224 71.4% 4.1%;
  --foreground: 208 100% 97%;
  
  --card: 222.2 47.4% 11.2%;
  --card-foreground: 208 100% 97%;

  --popover: 222.2 47.4% 11.2%;
  --popover-foreground: 208 100% 97%;

  --primary: 204 68% 66%;
  --primary-foreground: 224 71.4% 4.1%;

  --secondary: 222.2 47.4% 11.2%;
  --secondary-foreground: 208 100% 97%;

  --muted: 222.2 47.4% 11.2%;
  --muted-foreground: 215.4 16.3% 65%;

  --accent: 281 60% 70%;
  --accent-foreground: 224 71.4% 4.1%;

  --destructive: 0 84.2% 70%;
  --destructive-foreground: 224 71.4% 4.1%;

  --success: 142.1 76.2% 46.3%;
  --success-foreground: 224 71.4% 4.1%;

  --border: 214.3 31.8% 25%;
  --input: 214.3 31.8% 25%;
  --ring: 204 68% 66%;
}

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-sans;
    font-feature-settings: "rlig" 1, "calt" 1;
    overscroll-behavior-x: none;
    touch-action: pan-y pinch-zoom;
  }
  
  h1, h2, h3, h4, h5, h6 {
    @apply font-grotesk;
  }

  input, textarea, select {
    @apply shadow-sm transition-shadow duration-200;
  }
}

@layer utilities {
    .text-cat-foreground {
        color: hsl(var(--cat-foreground));
    }
    .cursor-zoom-in {
      cursor: zoom-in;
    }
    .touch-none {
      touch-action: none;
    }
}

@layer base {
  @keyframes shimmer {
    100% {
      transform: translateX(100%);
    }
  }
  .animate-shimmer {
    animation: shimmer 1.5s infinite;
  }
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  .view-container-animation {
    animation: fadeIn 0.3s ease-in-out;
  }
  @keyframes pulse-ring {
    0% {
      transform: scale(0.95);
      box-shadow: 0 0 0 0 hsla(var(--destructive), 0.7);
    }
    70% {
      transform: scale(1);
      box-shadow: 0 0 0 10px hsla(var(--destructive), 0);
    }
    100% {
      transform: scale(0.95);
      box-shadow: 0 0 0 0 hsla(var(--destructive), 0);
    }
  }
  .animate-pulse-ring {
    animation: pulse-ring 2s infinite;
  }
  @keyframes animate-fade-in {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in {
      animation: animate-fade-in 0.2s ease-out forwards;
  }
  @keyframes pulse-shadow {
    0%, 100% {
      box-shadow: 0 0 0 0 hsl(var(--primary) / 0.4);
    }
    50% {
      box-shadow: 0 0 0 1rem hsl(var(--primary) / 0);
    }
  }
}

@layer components {
  .chat-nav-item .chat-icon-waves path {
    animation: wave-dance 1.5s infinite ease-in-out;
    transform-origin: center;
  }
  .chat-nav-item .chat-icon-waves .wave-2 { animation-delay: 0.2s; }
  .chat-nav-item .chat-icon-waves .wave-3 { animation-delay: 0.4s; }

  /* On active/long-press state */
  .chat-nav-item:active .chat-icon-waves path {
    animation: wave-dance-active 1s infinite ease-in-out;
  }

  .conversation-button .convo-icon-waves path {
    animation: wave-dance 1.8s infinite ease-in-out;
  }
  .conversation-button .convo-icon-waves .wave-2 { animation-delay: 0.3s; }
  .conversation-button .convo-icon-waves .wave-3 { animation-delay: 0.6s; }
  
  .conversation-button {
    animation: pulse-shadow 2.5s infinite cubic-bezier(0.66, 0, 0, 1);
  }

  .conversation-button:hover .convo-icon-waves path,
  .conversation-button:focus-visible .convo-icon-waves path {
    animation: wave-dance-active 1.2s infinite ease-in-out;
  }
}

@layer base {
  @keyframes wave-dance {
    0%, 100% { transform: scaleY(0.6); }
    50% { transform: scaleY(1); }
  }

  @keyframes wave-dance-active {
    0%, 100% { transform: scaleY(0.4); stroke-width: 2; }
    50% { transform: scaleY(1.2); stroke-width: 2.5; }
  }
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Sand Spirals Conversation Mode */
.sand-spirals-overlay {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    overflow: hidden;
    height: 100vh;
    background: linear-gradient(135deg, #f8fafc 0%, #e8eef5 100%);
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    z-index: 50;
    color: #1f2937;
}

.sand-spirals-overlay * {
    box-sizing: border-box;
}

/* Sand Spirals Background */
.sand-spirals-overlay .spirals-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 0;
}

.sand-spirals-overlay .spiral-container {
    position: absolute;
    pointer-events: none;
}

.sand-spirals-overlay .spiral-particle {
    position: absolute;
    border-radius: 50%;
    pointer-events: none;
}

/* Navy blue color palette */
.sand-spirals-overlay .bright-navy { background: #1973D1; }
.sand-spirals-overlay .denim { background: #135CC5; }
.sand-spirals-overlay .egyptian-blue { background: #0C3BAA; }
.sand-spirals-overlay .white { background: #ffffff; }

/* Particle sizes */
.sand-spirals-overlay .tiny { width: 3px; height: 3px; }
.sand-spirals-overlay .small { width: 5px; height: 5px; }
.sand-spirals-overlay .medium { width: 7px; height: 7px; }

/* Development and dissolution animation */
@keyframes spiral-develop {
    0% { opacity: 0; transform: scale(0.3) rotate(0deg); }
    15% { opacity: 0.4; transform: scale(0.6) rotate(180deg); }
    30% { opacity: 0.7; transform: scale(0.9) rotate(360deg); }
    50% { opacity: 0.8; transform: scale(1) rotate(540deg); }
    70% { opacity: 0.7; transform: scale(0.9) rotate(720deg); }
    85% { opacity: 0.4; transform: scale(0.6) rotate(900deg); }
    100% { opacity: 0; transform: scale(0.3) rotate(1080deg); }
}

/* Main Content Container */
.sand-spirals-overlay .container {
    position: relative;
    z-index: 1;
    height: 100vh;
    display: flex;
    flex-direction: column;
}

/* Header */
.sand-spirals-overlay .header {
    padding: 20px 24px;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
}

.sand-spirals-overlay .header h1 {
    font-size: 24px;
    font-weight: 600;
    color: #1f2937;
}

/* Conversation Area */
.sand-spirals-overlay .conversation-area {
    flex: 1;
    overflow-y: auto;
    padding: 32px 24px 220px 24px; /* Increased bottom padding */
}

.sand-spirals-overlay .conversation-content {
    max-width: 800px;
    margin: 0 auto;
}

/* Message Bubbles */
.sand-spirals-overlay .message {
    margin-bottom: 24px;
    animation: fadeInMessage 0.3s ease-in;
}

@keyframes fadeInMessage {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.sand-spirals-overlay .message-label {
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
    color: #6b7280;
}

.sand-spirals-overlay .message-bubble {
    padding: 16px 20px;
    border-radius: 16px;
    font-size: 16px;
    line-height: 1.6;
    color: #1f2937;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.sand-spirals-overlay .message.user .message-bubble {
    background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
    border: 1px solid rgba(25, 115, 209, 0.2);
}

.sand-spirals-overlay .message.ai .message-bubble {
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(0, 0, 0, 0.08);
}

/* Recording Controls */
.sand-spirals-overlay .controls-container {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 10;
    background: linear-gradient(to top, rgba(255, 255, 255, 0.98) 0%, rgba(255, 255, 255, 0.95) 70%, rgba(255, 255, 255, 0) 100%);
    padding: 32px 24px 32px 24px;
    backdrop-filter: blur(10px);
}

.sand-spirals-overlay .controls {
    max-width: 800px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
}

/* Audio Visualizer */
.sand-spirals-overlay .audio-visualizer {
    display: flex;
    align-items: flex-end;
    gap: 6px;
    height: 60px;
    justify-content: center;
}

.sand-spirals-overlay .bar {
    width: 8px;
    background: linear-gradient(to top, #0C3BAA, #1973D1);
    border-radius: 4px;
    transition: height 0.1s ease;
}

.sand-spirals-overlay .bar:nth-child(1) { height: 20px; animation: pulse 0.8s ease-in-out infinite; }
.sand-spirals-overlay .bar:nth-child(2) { height: 35px; animation: pulse 0.8s ease-in-out infinite 0.1s; }
.sand-spirals-overlay .bar:nth-child(3) { height: 50px; animation: pulse 0.8s ease-in-out infinite 0.2s; }
.sand-spirals-overlay .bar:nth-child(4) { height: 35px; animation: pulse 0.8s ease-in-out infinite 0.3s; }
.sand-spirals-overlay .bar:nth-child(5) { height: 20px; animation: pulse 0.8s ease-in-out infinite 0.4s; }

@keyframes pulse {
    0%, 100% { transform: scaleY(1); opacity: 0.7; }
    50% { transform: scaleY(1.3); opacity: 1; }
}

/* Record Button */
.sand-spirals-overlay .record-button {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    border: 4px solid rgba(255, 255, 255, 0.9);
    box-shadow: 0 4px 16px rgba(239, 68, 68, 0.4), 0 8px 32px rgba(239, 68, 68, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
}

.sand-spirals-overlay .record-button:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 20px rgba(239, 68, 68, 0.5), 0 10px 40px rgba(239, 68, 68, 0.3);
}

.sand-spirals-overlay .record-button:active {
    transform: scale(0.95);
}

.sand-spirals-overlay .stop-icon {
    width: 24px;
    height: 24px;
    background: white;
    border-radius: 4px;
}

/* Status Text */
.sand-spirals-overlay .status-text {
    font-size: 14px;
    color: #6b7280;
    text-align: center;
}

/* Scrollbar Styling */
.sand-spirals-overlay .conversation-area::-webkit-scrollbar {
    width: 8px;
}

.sand-spirals-overlay .conversation-area::-webkit-scrollbar-track {
    background: transparent;
}

.sand-spirals-overlay .conversation-area::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.1);
    border-radius: 4px;
}

.sand-spirals-overlay .conversation-area::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.2);
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .sand-spirals-overlay .header { padding: 16px 16px; }
    .sand-spirals-overlay .header h1 { font-size: 20px; }
    .sand-spirals-overlay .conversation-area { padding: 24px 16px 220px 16px; }
    .sand-spirals-overlay .message-bubble { font-size: 15px; padding: 14px 16px; }
    .sand-spirals-overlay .controls-container { padding: 24px 16px 24px 16px; }
    .sand-spirals-overlay .record-button { width: 70px; height: 70px; }
}
